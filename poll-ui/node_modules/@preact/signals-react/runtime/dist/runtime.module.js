import{Signal as n,signal as t,computed as r,effect as i}from"@preact/signals-core";import{version as e,useRef as o,useMemo as u,useEffect as f,useState as c,useLayoutEffect as a}from"react";import{useSyncExternalStore as s}from"use-sync-external-store/shim/index.js";var l=e.split(".").map(Number)[0],v=[],d=Symbol.for(l>=19?"react.transitional.element":"react.element"),m="undefined"!=typeof window&&!!window.__PREACT_SIGNALS_DEVTOOLS__;function p(t){if("function"!=typeof t)return t;else return function(r,i){if("string"==typeof r&&i)for(var e in i){var o=i[e];if("children"!==e&&o instanceof n)i[e]=o.value}return t.call.apply(t,[t,r,i].concat([].slice.call(arguments,2)))}}var b,y=Symbol.dispose||Symbol.for("Symbol.dispose");function g(n,t){var r=t.effect.S();b=t;return h.bind(t,n,r)}function h(n,t){t();b=n}var w,_,S=function(){},x=((w={o:0,effect:{s:void 0,c:function(){},S:function(){return S},d:function(){}},subscribe:function(){return S},getSnapshot:function(){return 0},S:function(){},f:function(){}})[y]=function(){},w),j=Promise.prototype.then.bind(Promise.resolve());function P(){if(!_)_=j($)}function $(){var n;_=void 0;null==(n=b)||n.f()}var k="undefined"!=typeof window?a:f;function C(n,t){if(void 0===n)n=0;P();var r=o();if(null==r.current)if("undefined"==typeof window)r.current=x;else r.current=function(n,t){var r,e,o,u,f=0,c=i(function(){e=this},{name:t||"Component"});e.c=function(){f=f+1|0;if(m){var n;null==(n=e.y)||n.call(e)}if(u)u()};return(r={o:n,effect:e,subscribe:function(n){u=n;return function(){f=f+1|0;u=void 0;c()}},getSnapshot:function(){return f},S:function(){if(null!=b){var n=b.o,t=this.o;if(0==n&&0==t||0==n&&1==t){b.f();o=g(void 0,this)}else if(1==n&&0==t||2==n&&0==t);else o=g(b,this)}else o=g(void 0,this)},f:function(){var n=o;o=void 0;null==n||n()}})[y]=function(){this.f()},r}(n,t);var e=r.current;s(e.subscribe,e.getSnapshot,e.getSnapshot);e.S();if(0===n)k($);return e}Object.defineProperties(n.prototype,{$$typeof:{configurable:!0,value:d},type:{configurable:!0,value:function(n){var t=n.data,r=C(1);try{return t.value}finally{r.f()}}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});function N(n,t){return C(n,t)}function useSignal(n,r){return u(function(){return t(n,r)},v)}function useComputed(n,t){var i=o(n);i.current=n;return u(function(){return r(function(){return i.current()},t)},v)}function useSignalEffect(n,t){var r=o(n);r.current=n;f(function(){return i(function(){return r.current()},t)},v)}function O(n){var t=c(function(){return n()})[0];f(function(){return t[Symbol.dispose]},[t]);return t}export{C as _useSignalsImplementation,P as ensureFinalCleanup,useComputed,O as useModel,useSignal,useSignalEffect,N as useSignals,p as wrapJsx};//# sourceMappingURL=runtime.module.js.map
